%TODO: context-awareness vs. validation (gegen√ºberstellung)

\input{setup}

\date{5.6.2019}

\begin{document}

\renewcommand{\enquote}[1]{\emph{``#1''}} % Cannot be done earlier

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
	\titlepage
	\doclicenseThis
\end{frame}

\begin{frame}
	Lecture is every week Wednesday 09:00 - 11:00.

	\begin{description}
		\item[06.03.2019:] {\color{gray}topic, teams}
		\item[13.03.2019:] {\color{gray}TISS registration, initial PR}
		\item[20.03.2019:] {\color{gray}other registrations, guest lecture}
		\item[27.03.2019:] {\color{gray}PR for first issue done, second started}
		\item[03.04.2019:] {\color{gray}first issue done, PR for second}
		\item[10.04.2019:] {\color{gray}mid-term submission of exercises}
		\item[08.05.2019:] {\color{gray}different location: Complang Libary}
		\item[15.05.2019:]
		\item[22.05.2019:] {\color{gray}all 5 issues done}
		\item[29.05.2019:]
		\item[05.06.2019:] {\color{red}final submission of exercises}
		\item[12.06.2019:]
		\item[19.06.2019:] last corrections of exercises and register for exam
		\item[26.06.2019:] exam
	\end{description}
\end{frame}

\begin{assignment}
	\frametitle{Tasks for today}
	(until 05.06.2019 23:59)

	\begin{task}
	Submit teamwork and homework.
	\end{task}

	\vspace{1cm}
	\pause

	Please also
	\begin{itemize}[<+-| alert@+>]
	\item register for the exam in TISS.
	\item push your slides from the talk in the cm2019s repo.
	\end{itemize}
\end{assignment}

\begin{frame}
	\frametitle{Popular Topics}
	\vspace{-0.55cm}
	\setlength{\columnsep}{-1.3cm}
	\raggedright
	\definecolor{amethyst}{rgb}{0.6, 0.4, 0.8}
	\begin{multicols}{2}
	\begin{description}
	\item[14] {\color{red} tools}
	\item[9] {\color{gray} testability}
	\item[9] {\color{gray} code-generation}
	\item[7] {\color{amethyst} context-awareness}
	\item[6] {\color{red} specification}
	\item[6] {\color{gray} misconfiguration}
	\item[6] {\color{gray} complexity reduction}
	\item[5] {\color{red} validation}
	\item[5] {\color{gray} points in time} % (early detection)
	\item[5] error messages
	\item[5] {\color{gray} auto-detection}
	\item[4] user interface
	\item[4] {\color{gray} introspection}
	\item[4] {\color{amethyst} design}
	\item[4] {\color{gray} cascading}
	\item[4] {\color{gray} architecture of access}
	\item[3] {\color{gray} configuration sources}
	\item[3] {\color{gray} config-less systems}
	\item[2] secure conf
	\item[2] {\color{gray} architectural decisions}
	\item[1] {\color{red} push vs.\ pull}
	\item[1] {\color{red} infrastructure as code}
	\item[1] full vs.\ partial
	\item[1] convention over conf %iguration
	\item[1] CI/CD
	\item[0] {\color{gray} documentation}
	\end{description}
	\end{multicols}
\end{frame}

\begin{frame}
	\hspace*{-1cm}\includegraphics[width=\paperwidth]{dot/topics}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\section{Recapitulation}
\subsection{}

\begin{frame}
	\frametitle{Early detection (Recapitulation)}
	\begin{task}
	When do we want to detect misconfiguration?
	\end{task}

	\pause

	Phases when we can detect misconfigurations:
	\begin{itemize} %[<+-| alert@+>]
	\item Compilation stage in configuration management tool
	\item Writing configuration settings on nodes
	\item Starting applications (load-time)
	\item When configuration setting is actually used (run-time)
	\end{itemize}

	\pause[\thebeamerpauses]

	\begin{alertblock}{Problem}
	Earlier versus more context.
	\end{alertblock}
\end{frame}

\begin{frame}
	\frametitle{Contextual Values (Recapitulation)}

	\begin{task}
	What are contextual values?
	\end{task}

	\pause

	\ExecuteMetaData[../book/background.tex]{contextual-values}
\end{frame}

\begin{frame}
	\frametitle{Definition Context (Recapitulation)}

	\begin{task}
	What is context-aware configuration?
	\end{task}

	\pause

	\ExecuteMetaData[../book/background.tex]{context-definition}
\end{frame}

\begin{frame}
	\frametitle{Elektra (Recapitulation)}

	\pause

	\begin{itemize}
	\item is not only a key database but a specification language to describe a key database
	\item plugins implement the specification (could be distributed but focus is configuration files)
	\item is library based (no single point of failure, no distributed coordination needed)
	\item supports transactions (persisting whole KeySets at once)
	\item supports integration of existing configuration settings
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{Definition Configuration Management (Recapitulation)}

	\pause

	\begin{itemize}
	\item is a discipline in which configuration (in the broader sense) is administered.
	\item makes sure computers are assembled from desired parts and the correct applications are installed.
	\item has means to describe the desired configuration of the whole managed system.
	\item ensures that the execution environment of installed applications is as required.
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{Possible Benefits of CM (Recapitulation)}

	\pause

	\begin{itemize} %[<+-| alert@+>]
	\item All advantages scripts have: \\
		Documentation, Customization, Reproducability
	\item Declarative description of the system \\
		(Infrastructure as Code~\cite{waldemar2013testing})
	\item Less configuration drift
	\item Error handling
	\item Pull/Push
	\item Reusability
	\item (Resource) Abstractions
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{Learning Outcomes}
	Students will be able to
	\begin{itemize}
	\item define terms of properties of CM.
	\item analyze validation specifications.
	\item remember the difference between checking the specifications vs.\ checking the settings.
	\end{itemize}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\section{Terms and Properties}
\subsection{}

\begin{frame}
	\frametitle{Infrastructure as Code}

	Once we described configuration settings,
	configuration settings are simply an instantiation of the configuration specifications.
	\vspace{1em}

	Code describing the instantiation is \textbf{CM code}.
	\vspace{1em}

	\textbf{Auditability:}
	Being informed about status and changes in the infrastructure.
	\vspace{1em}

	\begin{alertblock}{Goal}
	Single Source of Truth
	\end{alertblock}
\end{frame}

\begin{frame}
	\frametitle{Configuration Drift}

	Are derivations of the ``Single Source of Truth'' (the CM code).

	Caused by:

	\pause

	\begin{itemize}[<+-| alert@+>]
	\item manual configuration changes by administrators
	\item manual configuration changes by end users
	\item differences in updates (e.g., skipped or failed updates)
	\item failed attempts to change configuration
	\item applying different versions of CM code
	\item \dots
	\end{itemize}
\end{frame}

\begin{assignment}
	\begin{task}
	Break.
	\end{task}
\end{assignment}

\begin{frame}
	\frametitle{Push vs.\ Pull}

	\begin{itemize}[<+-| alert@+>]
	\item Push is more interactive.
	\item Push cannot do its job if nodes are not reachable.
	\item Push needs additional techniques to scale with many nodes.
	\item Push demands access to servers from a single server.
	\item Pull needs additional monitoring to know when a patch has been applied.
	\item Pull needs resources even if nothing is to do.
	\end{itemize}

	\begin{task}
	Do you prefer push or pull?
	What does your CM tool of choice use?
	\end{task}
\end{frame}


\begin{frame}
	\frametitle{Idempotence}

	idem + potence (same + power)
	\vspace{2em}

	Yield same result with any number of applications ($n\ge1$):
		
	\[
		f(f(x))=f(x)
	\]
\end{frame}


\begin{frame}
	\citet{wadler2003xml} describe two further properties:
	\vspace{2em}

	\begin{description}
	\item[Self-describing]
	means that from the configuration file alone we are able to derive the correct data structure~\cite{wadler2003xml}.

	\item[Round-tripping]
	means that if a data structure is serialized and then parsed again, we end up with an identical data structure~\cite{wadler2003xml}.
	\end{description}

	The data structure could be a KeySet.

	\pause

	\vspace{2em}
	Round-tripping is a prerequisite of idempotence.

	\pause

	\begin{task}
	Explain the three concepts your neighbor (idempotence, self-describing, round-tripping).
	\end{task}
\end{frame}


\begin{frame}
	\frametitle{Conclusion}

	\begin{itemize}[<+-| alert@+>]
	\item Definition and challenges in configuration management.
	\item Properties: self-describing, idempotent, round-tripping.
	\item Validation is combined effort of devs and admins.
	\end{itemize}
\end{frame}


\begin{frame}
	\frametitle{Outlook}

	\begin{itemize}[<+-| alert@+>]
	\item Error Messages
	\item Configuration Management Tools and Languages
	\item User Interface: View of Administrators
	\end{itemize}
\end{frame}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\nocite{raab2017introducing}

\appendix

\begin{frame}[allowframebreaks]
	\bibliographystyle{plainnat}
	\bibliography{../shared/elektra.bib}
\end{frame}

\end{document}

