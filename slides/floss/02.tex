\input{setup}

\title{L02 Source Code Management}

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\section{Local}

\begin{frame}<1>[label=learning outcome]
	\frametitle{Learning Outcomes}
	After successful completion of L02 \\
	students will be able to

	\begin{itemize}
	\item use source code management in FLOSS context
	\item review source code in FLOSS context
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{Git}

	\begin{itemize}
		\item initiated by Linus Torvalds
		\item content-addressable filesystem or object store
		\item low-level tools allow to build object graph
		\item porcelain commands for source code management on top
	\end{itemize}
	\vspace{1cm}

	\begin{quote}
	``Smart data structures and dumb code works a lot better than the other way around.''

	-- Eric S. Raymond
	\end{quote}
	\vspace{1cm}

	Elektra has KeySet as datastructure.
\end{frame}

\begin{frame}[fragile]
	\frametitle{Tool Suite Git}

	\begin{itemize}
		\item common functionality, e.g., ^--help^ opens man pages
		\item ^git^ is a wrapper calling other subcommands
		\item e.g., ^/usr/lib/git-core/git-bisect^ is a shellscript
	\end{itemize}
	\vspace{1cm}

	As in Elektra's kdb tool suite.
\end{frame}

\begin{frame}<2>[label=rebase]
	\frametitle{Rebase vs. Merge}

	\pause

	\begin{itemize}
		\item rebase rewrites commits
		\item rebase to be avoided if others already pulled
		\item merge creates merge commit
		\item merge is more often conflict-free
	\end{itemize}
\end{frame}

\begin{frame}<1>[label=daily]
	\frametitle{Daily Work}

	\begin{itemize}
		\item stash
		\item write your own git subcommands
		\item aliases via config
		\item ssh keys
	\end{itemize}

	\pause \pause

	\begin{task}
	Do you agree with that list?
	Discuss your experiences.
	\end{task}
\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\section{Decentralized}

\begin{frame}
	\frametitle{Workflows}

	\begin{itemize}
		\item patches by email
		\item create your fork and do pull requests via web
	\end{itemize}

	\begin{finding}
	Decide for one standard workflow for your FLOSS initiative.
	\end{finding}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Issue Tracker Integration}

	\begin{itemize}
		\item \verb+@mention+
		\item closes/fixes \verb+#issue+
	\end{itemize}

	\begin{finding}
	Prefer having all information directly in source code or git history.
	\end{finding}
\end{frame}

\begin{frame}<2>[label=before]
	\frametitle{Before Pull Requests}

	\pause

	\begin{itemize}
		\item Rebase to current master.
		\item If preferred by you: Squash unnecessary commits.
		\item Write a line in release notes
		\item Look through commit message.
		\item Look at what your Pull Request would change
	\end{itemize}

	\begin{finding}
	Prefer having all information directly in source code or git history.
	\end{finding}
\end{frame}

\begin{frame}
	\frametitle{Signing}

	GPG-sign vs.\ signoff:
	\begin{itemize}
		\item Commits
		\item Tags
	\end{itemize}

	\begin{finding}
	sign commits or tags of releases
	\end{finding}
\end{frame}

\begin{frame}<1>[fragile,label=branches]
	\frametitle{Best Practices}
	\begin{itemize}
		\item always work on branches in your own fork
		\item separate different things in different commits
		\item always pull before working
		\item be careful with \verb+--force+ push
		\item \verb+--rebase --autostash+
		\item rebase only before pushing
	\end{itemize}

	\pause

	\begin{task}
	Do you agree with that list?
	Discuss your experiences.
	\end{task}
\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\section{Reviews}

\begin{frame}
	\frametitle{Introduction}

	\begin{quote}
	``Given a large enough beta-tester and co-developer base, almost every problem will be characterized quickly and the fix obvious to someone.''

	-- Eric S. Raymond
	\end{quote}

	\pause
	\vspace{2cm}

	Linus's law:
	\begin{quote}
	``given enough eyeballs, all bugs are shallow''
	\end{quote}

	\vspace{1cm}
\end{frame}

\begin{frame}<2->[fragile,label=who]
	\frametitle{Who Reviews?}

	\pause

	\begin{itemize}[<+-| alert@+>]
	\item experienced programmers
	\item maintainers
	\item ``extern programmers''
	\item everyone who has time and concentration
	\end{itemize}
\end{frame}

\begin{frame}<2->[fragile,label=how]
	\frametitle{How to Review?}

	\pause

	\begin{itemize}[<+-| alert@+>]
	\item reading the code
	\item as little review criteria as possible
	\item standard criteria in \verb+.github/PULL_REQUEST_TEMPLATE.md+
	\item only important comments (avoid nitpicking)
	\item if automated, check if the check was running
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{Goals}

	\begin{itemize}[<+-| alert@+>]
	\item Testing with source-code awareness.
	\item Review everything.
	\item Have enough ``core developers'' and reviewers.
	\item Netiquette same as in issue tracker.
	\end{itemize}
\end{frame}

%\begin{frame}[fragile]
%	\frametitle{Demo}
%
%	\begin{itemize}
%	\item Create PR
%	\item Rebase PR
%	\item Review PR
%	\item PRs I reviewed: \verb+is:open reviewed-by:@me+
%	\begin{itemize}
%\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\section{Meeting}


\subsection{Recapitulation}

\againframe<2>{learning outcome}

\begin{frame}
	\frametitle{Presentation: Git \& GitHub}

	Fork
	\vspace{3cm}

	\begin{task}
	Questions? \\
	Meta-discussion
	\end{task}
\end{frame}

\againframe<3>{daily}

\againframe<1,3>{rebase}

\againframe<1,3>{before}

\begin{assignment}
	\begin{task}
	PRs vs.\ Issues
	\end{task}

	\begin{itemize}[<+-| alert@+>]
	\item found a bug
	\item have a patch to fix a bug
	\item found a documentation problem
	\item came across a bug in their own code
	\end{itemize}
\end{assignment}

\breakframe

\againframe<2>{branches}

\againframe<1,99>{who}
\againframe<1,99>{how}

\breakframe

\subsection{Assignments}

\begin{frame}
	\frametitle{News from Elektra}

	\begin{itemize}
	\item breaking change: new-backend branch
	\item decision process updated
	\end{itemize}
\end{frame}

\begin{assignment}
	\frametitle{Team}
	Teamsize: 1-3

	\begin{task}
	All teams settled?
	\end{task}
\end{assignment}

\begin{assignment}
	\frametitle{H1}
	\begin{task}
	Problems on specific issues?
	\end{task}

	\pause

	Please ask earlier.
\end{assignment}

\begin{assignment}
	\frametitle{P1}

	Recommendations:

	\begin{itemize}
	\item demarcating and complete functionality (including docu, tests, ...)
	\item something for yourself, what you are using, etc.
	\end{itemize}

	Ideas:

	\begin{itemize}
	\item Opensesame allow NC chat
	\item NC chat talk offline
	\item pipewire setup
	\end{itemize}

	\begin{task}
	Last questions?
	\end{task}
\end{assignment}

\begin{frame}
	\frametitle{Feedback}

	\hfill \includegraphics[width=2cm]{pics/feedback.png}
	\vspace{-1cm}
	\begin{itemize}
		\item Feedback Talk
		\item ECTS breakdown realistic?
		\item Best/Worst Videos?
	\end{itemize}
\end{frame}

\subsection{Preview}

\begin{frame}
	\frametitle{L03 Development Tools}

	Completely reworked:

	\begin{itemize}
	\item add your favourite development tool (wiki)
	\item videos
	\item Elektra reformatting\&testing tutorials
	\item Optional: CMake\&Valgrind
	\end{itemize}
\end{frame}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\nocite{raab2017introducing}

\appendix

\begin{frame}[allowframebreaks]
	\bibliographystyle{plainnat}
	\bibliography{../shared/elektra.bib}
\end{frame}

\end{document}


